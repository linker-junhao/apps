var w=Object.defineProperty;var c=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var d=(t,a,e)=>a in t?w(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,p=(t,a)=>{for(var e in a||(a={}))y.call(a,e)&&d(t,e,a[e]);if(c)for(var e of c(a))D.call(a,e)&&d(t,e,a[e]);return t};import{r as n,d as u,w as k,o as L,b as r,L as x,i as b,I as C,A as F,B as S,f,g as j,h as A,C as B}from"./vendor.a41f8111.js";import{w as G}from"./index.2ab6f498.js";import{r as g}from"./utils.3820aba6.js";import{r as m,w as h}from"./index.0f329b25.js";const z=()=>{const t=n({list:[],total:0});return{listData:t,append:(i,l)=>{t.list.push(...n(i)),t.total=l},flush:()=>{t.list.splice(0,t.list.length),t.total=0}}};var I=z;function K(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!b(t)}function R(){return u({name:"IdxList",props:["fetchListData","cellContentRender"],setup(t){const a=I(),e=n({finished:!1,loading:!1,error:!1}),i=n({page:1,pageSize:10}),l=async()=>{e.loading=!0,e.error=!1;try{const s=await t.fetchListData(i);a.append(s.list,s.total),i.pageSize>s.list.length&&(e.finished=!0)}catch{e.error=!0}e.loading=!1};k(()=>i,(s,o)=>{s.pageSize!==o.pageSize?(i.page=1,a.flush()):l()},{deep:!0});const v=()=>{!e.loading&&!e.error&&(i.page+=1),!e.loading&&e.error&&l()};return L(()=>{l()}),()=>{let s;return r(x,{"loading-text":"\u6B63\u5728\u52AA\u529B\u8F93\u51FA","finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86...","error-text":"\u51FA\u9519\u4E86\u51FA\u9519\u4E86",finished:e.finished,loading:e.loading,"onUpdate:loading":o=>e.loading=o,onLoad:v,"immediate-check":!0},K(s=a.listData.list.map(o=>r("div",{key:o.key},[t.cellContentRender(o.data)])))?s:{default:()=>[s]})}}})}var U=u({name:"FileViewer",props:{coverFileKey:{type:String,required:!0},fileGroup:{type:Array,required:!0,default:()=>[]}},setup(t){const a=n([]);return g([t.coverFileKey],a),{coverBlobUrl:a,viewFileGroup:()=>{const i=g(t.fileGroup)||[];C({images:i})}}},render(){return r("img",{src:this.coverBlobUrl[0],onClick:this.viewFileGroup},null)}}),_=u({name:"WorkList",setup(){const t=R(),a={extra:()=>r(f,{name:"chevron-right"},null)};return()=>r("div",null,[r(F,{title:"\u6211\u7684\u4F5C\u54C1"},{right:()=>r(S,{round:!0,text:!0,color:"transparent","text-color":"#ffffff",onClick:()=>{m.push({name:h.workAppend})}},{default:()=>[r(f,{name:"plus",size:24},null)]})}),r(t,{cellContentRender:e=>r("div",{onClick:()=>{m.push({name:h.workDetail,params:{workKey:e.id}})}},[j(r(B,null,p({default:()=>{var i;return[r("div",{class:"flex justify-start"},[r("div",null,[(i=e.picKey)==null?void 0:i.map(l=>r(U,{class:"w-24",key:l,coverFileKey:l,fileGroup:[l]},null))]),r("div",{class:"ml-2"},[r("div",null,[e.name]),r("div",null,[e.description])])])]}},a)),[[A("ripple")]])]),fetchListData:async()=>await G()},null)])}});export{_ as default};
