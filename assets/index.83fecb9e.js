var w=Object.defineProperty;var c=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var d=(t,r,e)=>r in t?w(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,p=(t,r)=>{for(var e in r||(r={}))y.call(r,e)&&d(t,e,r[e]);if(c)for(var e of c(r))D.call(r,e)&&d(t,e,r[e]);return t};import{r as n,d as u,w as k,o as L,b as a,L as x,i as b,I as j,A as C,B as F,g as f,h as S,j as A,C as B}from"./vendor.ed1587f2.js";import{w as G}from"./index.2ab6f498.js";import{r as g}from"./utils.0538edc3.js";import{r as m,w as h}from"./index.5ae436b9.js";const z=()=>{const t=n({list:[],total:0});return{listData:t,append:(i,l)=>{t.list.push(...n(i)),t.total=l},flush:()=>{t.list.splice(0,t.list.length),t.total=0}}};var I=z;function K(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!b(t)}function R(){return u({name:"IdxList",props:["fetchListData","cellContentRender"],setup(t){const r=I(),e=n({finished:!1,loading:!1,error:!1}),i=n({page:1,pageSize:10}),l=async()=>{e.loading=!0,e.error=!1;try{const s=await t.fetchListData(i);r.append(s.list,s.total),i.pageSize>s.list.length&&(e.finished=!0)}catch{e.error=!0}e.loading=!1};k(()=>i,(s,o)=>{s.pageSize!==o.pageSize?(i.page=1,r.flush()):l()},{deep:!0});const v=()=>{!e.loading&&!e.error&&(i.page+=1),!e.loading&&e.error&&l()};return L(()=>{l()}),()=>{let s;return a(x,{"loading-text":"\u6B63\u5728\u52AA\u529B\u8F93\u51FA","finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86...","error-text":"\u51FA\u9519\u4E86\u51FA\u9519\u4E86",finished:e.finished,loading:e.loading,"onUpdate:loading":o=>e.loading=o,onLoad:v,"immediate-check":!0},K(s=r.listData.list.map(o=>a("div",{key:o.key},[t.cellContentRender(o.data)])))?s:{default:()=>[s]})}}})}var U=u({name:"FileViewer",props:{coverFileKey:{type:String,required:!0},fileGroup:{type:Array,required:!0,default:()=>[]}},setup(t){const r=n([]);return g([t.coverFileKey],r),{coverBlobUrl:r,viewFileGroup:()=>{const i=g(t.fileGroup)||[];j({images:i})}}},render(){return a("img",{src:this.coverBlobUrl[0],onClick:this.viewFileGroup},null)}}),_=u({name:"WorkList",setup(){const t=R(),r={extra:()=>a(f,{name:"chevron-right"},null)};return()=>a("div",null,[a(C,{title:"\u6211\u7684\u4F5C\u54C1"},{right:()=>a(F,{round:!0,text:!0,color:"transparent","text-color":"#ffffff",onClick:()=>{m.push({name:h.workAppend})}},{default:()=>[a(f,{name:"plus",size:24},null)]})}),a(t,{cellContentRender:e=>a("div",{onClick:()=>{m.push({name:h.workDetail,params:{workKey:e.id}})}},[S(a(B,null,p({default:()=>{var i;return[a("div",{class:"flex justify-start"},[a("div",null,[(i=e.picKey)==null?void 0:i.map(l=>a(U,{class:"w-24",key:l,coverFileKey:l,fileGroup:[l]},null))]),a("div",{class:"ml-2"},[a("div",null,[e.name]),a("div",null,[e.description])])])]}},r)),[[A("ripple")]])]),fetchListData:async()=>await G()},null)])}});export{_ as default};
